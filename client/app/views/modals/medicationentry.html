<div class="modal-inner-content">
    <div class="row" ng-if="entryStep===0">
        <h3>Drug Information</h3>
        <div class="col-sm-6 col-sm-offset-3">
            <button class="btn btn-default col-sm-12" data-toggle="tab" data-target="#medinfo" aria-controls="medinfo" ng-click="initInfoSearch('prescription')">Prescription</button>
            <br />
            <button class="btn btn-default col-sm-12" data-toggle="tab" data-target="#medinfo" aria-controls="medinfo" ng-click="initInfoSearch('otc')">Over the Counter</button>
            <br />
            <button class="btn btn-default col-sm-12" data-toggle="tab" data-target="#medinfo" aria-controls="medinfo" ng-click="initInfoSearch('supplement')">Supplement</button>
        </div>
    </div>
    <div class="row" ng-if="entryStep===1">
        <h3>Medication Information</h3>
        <div class="row">
            <h4>Drug Information</h4>
            <div class="row">
                <div class="col-sm-9 form-group">
                    <label>Drug name (required)</label>
                    <input type="text" class="form-control" ng-model="pDrugName" placeholder="Drug Name" ng-disabled="drugSearchActive">
                </div>
                <div class="col-sm-2 col-sm-offset-1">
                <button class="btn btn-default " ng-click="drugSearch(pDrugName)" ng-disabled="drugSearchActive">Search</button>
                </div>
            </div>
            <div class="row">
                <div class="alert alert-danger" role="alert" ng-show="drugError">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span> {{drugError}}
                </div>
            </div>
            <div class="row" ng-show="rxnormResults">
                <h4>RxNorm Results ({{drugCount}})</h4>
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Synonym</th>
                            <th>RxId</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="rxdruggroup in rxnormResults.conceptGroup">
                        <tr ng-class="{info: rxdrug.selected}" ng-repeat="rxdrug in rxdruggroup.conceptProperties" ng-click="setSelectedDrug()">
                            <td>{{rxdrug.name}}</td>
                            <td>{{rxdrug.tty}}</td>
                            <td>{{rxdrug.synonym}}</td>
                            <td>{{rxdrug.rxcui}}</td>
                        </tr>
                    </tbody>
                </table>
                <!--<pre>{{rxnormResults}}</pre>-->
            </div>
        </div>
        <br />
        <div class="row" ng-if="medSearchType=='prescription'">
            <h4>Prescriber Information</h4>
            <div class="row">
                <div class="col-sm-9">
                    <div class = "col-sm-5 form-group">
                        <label>Prescriber's first name (required)</label>
                        <input type="text" class="form-control" ng-model="pFirstName" placeholder="First Name" ng-disabled="prescriberSearchActive">
                    </div>
                    <div class="col-sm-5 col-sm-offset-2 form-group">
                        <label>Prescriber's last name (required)</label>
                        <input type="text" class="form-control" ng-model="pLastName" placeholder="Last Name" ng-disabled="prescriberSearchActive">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 form-group">
                    <label>Prescriber's office zip code</label>
                    <input type="search" class="form-control" ng-model="pZip" placeholder="Zip Code" ng-disabled="prescriberSearchActive">
                </div>
                <div class=" col-sm-2 col-sm-offset-7">
                <button class="btn btn-default" ng-click="prescriberSearch(pFirstName, pLastName, pZip)" ng-disabled="prescriberSearchActive">Search</button>
                </div>
            </div>
            <div class="row">
                <div class="alert alert-danger" role="alert" ng-show="prescriberError">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span> {{prescriberError}}
                </div>
            </div>
            <div class="row" ng-show="prescriberResults" ng-if="medSearchType=='prescription'">
                <h4>Prescriber Results ({{prescriberCount}})</h4>
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Business Address</th>
                            <th>Practice Address</th>
                            <th>Gender</th>
                            <th>NPI</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-class="{info: prescriber.selected}" ng-repeat="prescriber in prescriberResults" ng-click="setSelectedPrescriber()">
                            <td>{{prescriber.first_name}} {{prescriber.last_name}}, {{prescriber.credential}}</td>
                            <td>{{prescriber.business_address}}</td>
                            <td>{{prescriber.practice_address}}</td>
                            <td>{{prescriber.gender}}</td>
                            <td>{{prescriber.npi}}</td>
                        </tr>
                    </tbody>
                </table>
                <!--<pre>{{prescriberResults}}</pre>-->
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-3">
                <button class="btn btn-default" data-toggle="tab" data-target="#medtype" aria-controls="medtype" ng-click="medReset()">Reset</button>
            </div>
            <div class="col-sm-3 col-sm-offset-6">
                <button class="btn btn-default" ng-click="nextStep()">Next</button>
            </div>
        </div>
    </div>
    <div class="row" ng-if="entryStep===2">
        <h3>Info so far:</h3>
        <div class="row">
            <div class="row">
                Drug Info: {{selectedDrug.synonym}}
            </div>
            <div class="row" ng-show="rximageResults" ng-if="rximageResults.nlmRxImages.length >= 1">
                <div ng-if="rximageResults.nlmRxImages.length == 1">
                    <h4>Is this what it looks like?</h4>
                    <div class="col-sm-2">
                        <img src="{{rximageResults.nlmRxImages[0].imageUrl}}" class="img-responsive img-thumbnail">
                    </div>
                </div>
                <div ng-if="rximageResults.nlmRxImages.length > 1">
                    <h4>Is your pill one of these?</h4>
                    <div class="col-sm-2" ng-repeat="rxImage in rximageResults.nlmRxImages">
                        <img src="{{rxImage.imageUrl}}" class="img-responsive img-thumbnail">
                    </div>
                </div>
                <!--<pre>{{rximageResults}}</pre>-->
            </div>
            <div class="row" ng-show="selectedPrescriber">
                Prescriber: {{selectedPrescriber.first_name}} {{selectedPrescriber.last_name}}, {{selectedPrescriber.credential}}
            </div>
        </div>
        <h3>Additional Info</h3>
        <div class="row">
            <div class="col-sm-5">When did you start taking it?</div>
            <div class="col-sm-4 col-sm-offset-1">
                <input type="date" class="form-control" ng-model="pStart" placeholder="MM/DD/YYYY">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-5">Is this a current medication?</div>
            <div class="col-sm-6 col-sm-offset-1">
                <label class="radio-inline" ng-init="pCurrentMedRadio='true'">
                    <input type="radio" name="pCurrentMedRadio" ng-model="pCurrentMedRadio" id="currentRadioYes" value="true"> Yes
                </label>
                <label class="radio-inline">
                    <input type="radio" name="pCurrentMedRadio" ng-model="pCurrentMedRadio" id="currentRadioNo" value="false"> No
                </label>
            </div>
        </div>
        <div class="row" ng-hide="pCurrentMedRadio">
            <div class="col-sm-5">If you're not currently taking it, when was your last dose?</div>
            <div class="col-sm-4 col-sm-offset-1">
                <input type="date" class="form-control" ng-model="pLast" placeholder="MM/DD/YYYY">
            </div>
        </div>
        <div class="row" ng-show="pCurrentMedRadio">
            <div class="col-sm-5">How often do you take it?</div>
            <div class="col-sm-6 col-sm-offset-1">
                <input type="search" class="form-control" ng-model="pOften">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-5">How much is a dose?</div>
            <div class="col-sm-6 col-sm-offset-1">
                <input type="search" class="form-control" ng-model="pDose">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-5">How is it administered? (i.e. Pill, Injection, Inhaler, etc)</div>
            <div class="col-sm-6 col-sm-offset-1">
                <input type="search" class="form-control" ng-model="pAdminister">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-5">Why do you take it?</div>
            <div class="col-sm-6 col-sm-offset-1">
                <textarea ng-model="pWhy" class="form-control" rows="3"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-3">
                <button class="btn btn-default" data-toggle="tab" data-target="#medtype" aria-controls="medtype" ng-click="medReset()">Reset</button>
            </div>
            <div class="col-sm-3 col-sm-offset-2">
                <button class="btn btn-default" data-toggle="tab" data-target="#medinfo" aria-controls="medinfo" ng-click="previousStep()">Back</button>
            </div>
            <div class="col-sm-3 col-sm-offset-1">
                <button class="btn btn-default" data-toggle="tab" data-target="#summary" aria-controls="summary" ng-click="nextStep()">Next</button>
            </div>
        </div>
    </div>
    <div class="row" ng-if="entryStep===3">
        <h3>Summary</h3>
        <div class="row">
            <div class="row">
                Drug Info: {{selectedDrug.synonym}}
            </div>
            <div class="row" ng-show="selectedPrescriber">
                Prescriber: {{selectedPrescriber.first_name}} {{selectedPrescriber.last_name}}, {{selectedPrescriber.credential}}
            </div>
        </div>
        <h4>Save Object</h4>
        <pre>{{enteredMedication}}</pre>
        <br />
        <div class="row">
            <div class="col-sm-3">
                <button class="btn btn-default" data-toggle="tab" data-target="#medtype" aria-controls="medtype" ng-click="medReset()">Reset</button>
            </div>
            <div class="col-sm-3 col-sm-offset-2">
                <button class="btn btn-default" data-toggle="tab" data-target="#addinfo" aria-controls="addinfo" ng-click="previousStep()">Back</button>
            </div>
            <div class="col-sm-3 col-sm-offset-1">
                <button class="btn btn-default" ng-click="saveMedication()">Submit</button>
            </div>
        </div>
        <div ng-if="saveMedicationStatus==='error'">
            <span>There was an error saving the medication.</span>
        </div>
        <div ng-if="saveMedicationStatus==='success'" ng-init="$hide()"></div>
    </div>
</div>