<style>
    td.panel {
        box-shadow: none;
    }
</style>
<div class="col-sm-12">
    <table class="table">
        <tbody>
            <tr>
                <td class="panel" colspan="2" style="border:none;">
                    <h4 class="text-left">{{entryData.procedure.name}}</h4>

                    <span ng-if="!entryData.date_time.point">
                    <h5 ng-hide="entryData.date_time.high" class="text-left">{{formatDate(entryData.date_time.low)}}</h5>
                    <h5 ng-if="entryData.date_time.high" class="text-left">{{formatDate(entryData.date_time.low)}} - {{formatDate(entryData.date_time.high)}}</h5>
                    </span>
                    <span ng-if="entryData.date_time.point">
                    	<h5 class="text-left">{{formatDate(entryData.date_time.point)}}</h5>
                    </span>

                </td>
                <td style="border:none;">
                    <svg height="40" width="20" style="position: relative; left: -9px; top: 0px;">
                        <polygon points="0,0 20,20 0,40 -10,40" style="fill:rgba(255,255,255,0.75);stroke:#ddd;stroke-width:0"></polygon>
                    </svg>
                </td>
                <td class="panel" colspan="2" style="border:none;">
                    <h4 class="text-left">{{matchData.procedure.name}}</h4>
                    <span ng-if="!entryData.date_time.point">
                    <h5 ng-hide="finalData.date_time.high" class="text-left">{{formatDate(finalData.date_time.low)}}</h5>
                    <h5 ng-if="finalData.date_time.high" class="text-left">{{formatDate(finalData.date_time.low)}} - {{formatDate(finalData.date_time.high)}}</h5>
                    </span>
                    <span ng-if="entryData.date_time.point">
                    	<h5 class="text-left">{{formatDate(finalData.date_time.point)}}</h5>
                    </span>

                </td>
            </tr>
            <tr ng-if="entryData.date_time.point">
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time, finalData.date_time) && {'background-color': '#B0C4DE'}"><span style="white-space:nowrap"><input ng-if="exists(flagData.date_time)" type="checkbox" ng-checked="!areEqual(matchData.date_time, finalData.date_time)" ng-click="checkboxToggle([flagData.date_time.low, flagData.date_time.high], matchData.date_time, finalData.date_time)"> Date:</span>
                </td>

                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time, finalData.date_time) && {'background-color': '#B0C4DE'}">
                    <span>{{formatDate(entryData.date_time.point)}}</span>


                    <span ng-if="isDifferent(flagData.date_time.point.date.kind)" class="label label-info pull-right">Different</span>
                </td>

                <td style="border:none;">&nbsp</td>
                <td class="panel" style="border:none;" ng-style="matchData.date_time.low.date !== finalData.date_time.low.date && {'background-color': '#B0C4DE'}">Date:</td>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time.low.date, finalData.date_time.low.date) && {'background-color': '#B0C4DE'}">

                    <span>{{formatDate(finalData.date_time.point)}}</span>
                    <span ng-show="!areEqual(matchData.date_time, finalData.date_time)" class="label label-warning pull-right">Updated</span>

            </tr>
            <tr ng-if="!entryData.date_time.point">
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time, finalData.date_time) && {'background-color': '#B0C4DE'}"><span style="white-space:nowrap"><input ng-if="exists(flagData.date_time)" type="checkbox" ng-checked="!areEqual(matchData.date_time, finalData.date_time)" ng-click="checkboxToggle([flagData.date_time.low, flagData.date_time.high], matchData.date_time, finalData.date_time)"> Date:</span>
                </td>

                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time, finalData.date_time) && {'background-color': '#B0C4DE'}">
                    <span ng-hide="finalData.date_time.high">{{formatDate(entryData.date_time.low)}}</span>
                    <span ng-if="finalData.date_time.high">{{formatDate(entryData.date_time.low)}} - {{formatDate(entryData.date_time.high)}}</span>


                    <span ng-if="isDifferent(flagData.date_time.low.date.kind) || isDifferent(flagData.date_time.high.date.kind)" class="label label-info pull-right">Different</span>
                </td>

                <td style="border:none;">&nbsp</td>
                <td class="panel" style="border:none;" ng-style="matchData.date_time.low.date !== finalData.date_time.low.date && {'background-color': '#B0C4DE'}">Date:</td>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.date_time.low.date, finalData.date_time.low.date) && {'background-color': '#B0C4DE'}">

                    <span ng-hide="finalData.date_time.high" class="text-left">{{formatDate(finalData.date_time.low)}}</span>
                    <span ng-if="finalData.date_time.high" class="text-left">{{formatDate(finalData.date_time.low)}} - {{formatDate(finalData.date_time.high)}}</span>
                    <span ng-show="!areEqual(matchData.date_time, finalData.date_time)" class="label label-warning pull-right">Updated</span>

            </tr>


            <tr>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.procedure, finalData.procedure) && {'background-color': '#B0C4DE'}"><span style="white-space:nowrap"><input ng-if="exists(flagData.procedure)" type="checkbox" ng-checked="!areEqual(matchData.procedure, finalData.procedure)" ng-click="checkboxToggle(flagData.procedure, matchData.procedure, finalData.procedure)"> Procedure:</span>
                </td>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.observation.allergen, finalData.observation.allergen) && {'background-color': '#B0C4DE'}">
                    <div class="panel">
                        <table class="table sub-table">
                            <tbody>
                                <tr>
                                    <td>Name:</td>
                                    <td>{{entryData.procedure.name}} <span ng-if="isDifferent(flagData.procedure.name.kind)" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code:</td>
                                    <td>{{entryData.procedure.code}} <span ng-if="isDifferent(flagData.procedure.code.kind)" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code System:</td>
                                    <td>{{entryData.procedure.code_system_name}} <span ng-if="isDifferent(flagData.procedure.code_system_name.kind)" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
                <td style="border:none;">&nbsp</td>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.procedure, finalData.procedure) && {'background-color': '#B0C4DE'}">Procedure:</td>
                <td class="panel" style="border:none;" ng-style="!areEqual(matchData.procedure, finalData.procedure) && {'background-color': '#B0C4DE'}">
                    <div class="panel">
                        <table class="table sub-table">
                            <tbody>
                                <tr>
                                    <td>Name:</td>
                                    <td ng-if="matchData.procedure.name === finalData.procedure.name">{{matchData.procedure.name}}</td>
                                    <td ng-if="matchData.procedure.name !== finalData.procedure.name">{{finalData.procedure.name}} <span class="label label-warning pull-right">Updated</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code:</td>
                                    <td ng-if="matchData.procedure.code === finalData.procedure.code">{{matchData.procedure.code}}</td>
                                    <td ng-if="matchData.procedure.code !== finalData.procedure.code">{{finalData.procedure.code}} <span class="label label-warning pull-right">Updated</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code System:</td>
                                    <td ng-if="matchData.procedure.code_system_name === finalData.procedure.code_system_name">{{matchData.procedure.code_system_name}}</td>
                                    <td ng-if="matchData.procedure.code_system_name !== finalData.procedure.code_system_name">{{finalData.procedure.code_system_name}} <span class="label label-warning pull-right">Updated</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>


            <tr ng-if="entryData.body_sites" ng-repeat="(body_siteIndex, body_siteEntry) in entryData.body_sites">


                <td style="border:none;" class="panel" ng-style="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex]) && {'background-color': '#B0C4DE'}"><span style="white-space:nowrap"><input ng-if="exists(flagData.body_sites[body_siteIndex])" type="checkbox" ng-checked="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex])" ng-click="body_siteCheckboxToggle([flagData.body_sites[body_siteIndex].body_site, flagData.body_sites[body_siteIndex].severity], matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex],body_siteEntry, details.matches[0].match_object.diff.body_sites)"> Body Site {{body_siteIndex + 1}}:</span>
                </td>
                <!--<td  style="border:none;" class="panel" ng-style="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex]) && {'background-color': '#B0C4DE'}"><span style="white-space:nowrap"><input ng-if="!exists(finalData.body_sites[body_siteIndex]) || !areEqual(body_siteEntry.value, finalData.body_sites[body_siteIndex].value) || contains(body_siteCheckboxOverwrite, body_siteIndex)" type="checkbox" ng-checked="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex])" ng-click="body_siteCheckboxToggle(body_siteIndex, body_siteEntry, matchData.body_sites, finalData.body_sites)"> Body Site {{body_siteIndex + 1}}:</span></td>-->
                <td style="border:none;" class="panel" ng-style="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex]) && {'background-color': '#B0C4DE'}">
                    <div class="panel">
                        <table class="table sub-table">

                            <tbody>
                                <tr>
                                    <td>Name:</td>
                                    <td>{{body_siteEntry.name}} <span ng-if="body_siteIndex >= matchData.body_sites.length" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code:</td>
                                    <td>{{body_siteEntry.code}} <span ng-if="body_siteIndex >= matchData.body_sites.length" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code System:</td>
                                    <td>{{body_siteEntry.code_system_name}} <span ng-if="body_siteIndex >= matchData.body_sites.length" class="label label-info pull-right">Different</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
                <td style="border:none;">&nbsp</td>

                <td style="border:none;" class="panel" ng-style="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex]) && {'background-color': '#B0C4DE'}"><span ng-if="finalData.body_sites[body_siteIndex]">Body Site {{body_siteIndex + 1}}:</span>
                </td>
                <td style="border:none;" class="panel" ng-style="!areEqual(matchData.body_sites[body_siteIndex], finalData.body_sites[body_siteIndex]) && {'background-color': '#B0C4DE'}">
                    <div class="panel" ng-if="finalData.body_sites[body_siteIndex]">
                        <table class="table sub-table">

                            <tbody>
                                <tr>
                                    <td>Name:</td>

                                    <td ng-if="matchData.body_sites[body_siteIndex].name === finalData.body_sites[body_siteIndex].name">{{matchData.body_sites[body_siteIndex].name}}</td>
                                    <td ng-if="matchData.body_sites[body_siteIndex].name !== finalData.body_sites[body_siteIndex].name">{{finalData.body_sites[body_siteIndex].name}} <span class="label label-danger pull-right">New</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code:</td>
                                    <td ng-if="matchData.body_sites[body_siteIndex].code === finalData.body_sites[body_siteIndex].code">{{matchData.body_sites[body_siteIndex].code}}</td>
                                    <td ng-if="matchData.body_sites[body_siteIndex].code !== finalData.body_sites[body_siteIndex].code">{{finalData.body_sites[body_siteIndex].code}} <span class="label label-danger pull-right">New</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Code System:</td>
                                    <td ng-if="matchData.body_sites[body_siteIndex].code_system_name === finalData.body_sites[body_siteIndex].code_system_name">{{matchData.body_sites[body_siteIndex].code_system_name}}</td>
                                    <td ng-if="matchData.body_sites[body_siteIndex].code_system_name !== finalData.body_sites[body_siteIndex].code_system_name">{{finalData.body_sites[body_siteIndex].code_system_name}} <span class="label label-danger pull-right">New</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>

            <tr ng-if="entryData.body_sites.length !== finalData.body_sites.length && newIndex + 1 > entryData.body_sites.length" ng-repeat="(newIndex, newbody_site) in finalData.body_sites">
                <td colspan="2" style="border:none;" class="panel">
                    <td style="border:none;" style="border:none;">&nbsp</td>
                    <td style="border:none;background-color:#B0C4DE;" class="panel"></td>
                    <td style="border:none;background-color:#B0C4DE;" class="panel">
                        <div class="panel">
                            <table class="table sub-table">

                                <tbody>
                                    <tr>
                                        <td>Name:</td>

                                        <td>{{newbody_site.name}} <span class="label label-danger pull-right">New</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Code:</td>

                                        <td>{{newbody_site.code}} <span class="label label-danger pull-right">New</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Code System Name:</td>

                                        <td>{{newbody_site.code_system_name}} <span class="label label-danger pull-right">New</span>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </td>
            </tr>
            <tr>


                <tr>
                    <td colspan="2">
                        <div class="col-sm-8 col-sm-offset-2 btn-group-vertical">
                            <button class="btn btn-default btn-block" ng-click="undoAllButton()"><i class="fa fa-undo" style="margin-right: 10px;"></i>Undo All</button>
                            <button class="btn btn-warning btn-block" ng-click="createNew()">Create New</button>
                        </div>

                    </td>
                    <td style="border:none;">&nbsp</td>
                    <td colspan="2">
                        <div class="col-sm-8 col-sm-offset-2 btn-group-vertical">
                            <button class="btn btn-primary btn-block" ng-click="submitButton()">Save Updates</button>
                            <button class="btn btn-default btn-block" ng-click="ignoreButton()">Ignore Updates</button>
                        </div>

                    </td>

                </tr>


        </tbody>
    </table>
</div>